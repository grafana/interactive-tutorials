{
  "id": "macos-integration-install-alloy",
  "title": "Install Grafana Alloy",
  "blocks": [
    {
      "type": "markdown",
      "content": "The next step in your journey is to install Grafana Alloy. Alloy offers native pipelines for OTel, Prometheus, Pyroscope, Loki, and many other metrics, logs, traces, and profile tools. In addition, you can use Alloy pipelines to do different tasks, such as configure alert rules in Loki and Mimir. Alloy is fully compatible with the OTel Collector, Prometheus Agent, and Promtail.\n\nTo install Alloy you must either use an existing token or create a new one.\n\n**Did you know?** The token safeguards against unauthorized access, ensuring that only you can install Alloy on your Mac.\n\nInstall Alloy by completing the following steps:"
    },
    {
      "type": "section",
      "blocks": [
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "button[data-testid='agent-config-button']",
          "requirements": ["exists-reftarget"],
          "content": "In the **Install Alloy** section, click **Run Grafana Alloy**."
        },
        {
          "type": "markdown",
          "content": "Perform one of the following:\n\n| If you want to | Then |\n| --- | --- |\n| Create a new token | Click **Create new token**, enter a meaningful token name (e.g., `MyMacBookPro`), then click **Create token**. |\n| Use an existing token | Click **Use an existing token** and enter a token you have created in the past. |\n\n**Tip:** You don't need to copy the token. The token is added to a Grafana Alloy configuration command that you copy and run in a later step."
        },
        {
          "type": "markdown",
          "content": "Verify that the **Enable Remote Configuration** toggle is set to on."
        },
        {
          "type": "markdown",
          "content": "Log in to the Mac as a user with administrator permissions and open Terminal. Run the following command to install Alloy:\n\n```\nbrew install grafana/grafana/alloy\n```\n\n**Tip:** It may take a few minutes to install Alloy. Hang in there!"
        },
        {
          "type": "markdown",
          "content": "Return to Grafana Cloud in your browser and scroll down to the **Set up the Alloy Configuration** section."
        },
        {
          "type": "markdown",
          "content": "Click **Copy to Clipboard** to copy a command to generate an Alloy configuration file."
        },
        {
          "type": "markdown",
          "content": "Paste the contents of the clipboard into the terminal and press **Enter**. Enter your macOS password when requested.\n\nOnce the command completes, you'll see `Alloy is ready to run` in the terminal."
        },
        {
          "type": "markdown",
          "content": "Enter the following command to restart Alloy:\n\n```\nbrew services restart grafana/grafana/alloy\n```\n\nIf you see `Successfully started alloy`, then Alloy is running."
        },
        {
          "type": "markdown",
          "content": "Return to Grafana Cloud in your browser and click **Test Alloy connection**.\n\nIf Grafana Alloy is installed correctly, you'll see `Awesome! Grafana Alloy is good to go`.\n\n**Tip:** Testing the Alloy connection may take a minute or two. If the test initially times out, try clicking **Test Alloy connection** again."
        },
        {
          "type": "markdown",
          "content": "Once Alloy is successfully installed, click **Proceed to install integration**."
        }
      ]
    }
  ]
}
