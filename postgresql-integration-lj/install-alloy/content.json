{
  "schemaVersion": "1.0.0",
  "id": "postgresql-integration-install-alloy",
  "title": "Install Grafana Alloy",
  "blocks": [
    {
      "type": "markdown",
      "content": "In this milestone, you install Grafana Alloy on your selected platform. Grafana Alloy collects PostgreSQL metrics and forwards them to Grafana Cloud for monitoring and visualization.\n\nBefore installing Grafana Alloy, you need to obtain your Grafana Cloud configuration details to establish secure communication between Alloy and your Grafana Cloud stack."
    },
    {
      "type": "section",
      "id": "install-alloy-steps",
      "title": "Install Alloy",
      "blocks": [
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "button[data-testid='agent-config-button']",
          "requirements": ["on-page:/connections/add-new-connection/postgresql"],
          "content": "In the **Install Alloy** section, click **Run Grafana Alloy**."
        },
        {
          "type": "markdown",
          "content": "**Create or select a token:**\n\n- **Create new token**: Click **Create new token**, enter a meaningful token name (e.g., `prodUS`), then click **Create token**.\n- **Use existing token**: Click **Use an existing token** and enter a token you have created in the past.\n\n**Tip:** You don't need to copy the token. The token is added to the install Grafana Alloy script that you copy in the next step."
        },
        {
          "type": "markdown",
          "content": "Verify that the **Enable Remote Configuration** toggle is set to on."
        },
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "h3:contains(\"Restart Grafana Alloy and test configurations\") ~ * button:contains(\"Copy to clipboard\")",
          "requirements": ["on-page:/connections/add-new-connection/postgresql"],
          "content": "In the **Install and run Grafana Alloy** section, click **Copy to Clipboard**."
        },
        {
          "type": "markdown",
          "content": "Log into the machine where you are installing Grafana Alloy, open the Terminal, and paste the contents of the clipboard. Press **Enter** to install Grafana Alloy.\n\nWhen the installation is complete, you'll see `Alloy is now running!`"
        },
        {
          "type": "markdown",
          "content": "To verify that Grafana Alloy is installed correctly, click **Test Alloy connection**.\n\nIf Grafana Alloy is installed correctly, you'll see `Awesome! Grafana Alloy is good to go`."
        },
        {
          "type": "markdown",
          "content": "If Alloy is successfully installed, click **Proceed to install integration**."
        }
      ]
    },
    {
      "type": "markdown",
      "content": "In your next milestone, you'll prepare the PostgreSQL database configuration."
    },
    {
      "type": "markdown",
      "content": "## Troubleshooting\n\nExplore the following troubleshooting topics if you need help:\n\n- [Common errors when executing Alloy installation script](https://grafana.com/docs/grafana-cloud/monitor-infrastructure/integrations/troubleshoot/install-troubleshoot-linux-alloy/#common-errors-when-executing-alloy-installation-script)\n- [Alloy is installed, but data doesn't appear in Grafana Cloud](https://grafana.com/docs/grafana-cloud/monitor-infrastructure/integrations/troubleshoot/install-troubleshoot-linux-alloy/#alloy-is-installed-but-data-doesnt-appear-in-grafana-cloud)"
    },
    {
      "type": "markdown",
      "content": "## More to explore\n\nAt this point in your journey, you can explore the following paths:\n\n- [What is Grafana Alloy?](https://grafana.com/oss/alloy-opentelemetry-collector)\n- [Monitor multiple Linux hosts with the grafana_agent role](https://grafana.com/docs/grafana-cloud/developer-resources/infrastructure-as-code/ansible/ansible-multiple-agents)\n- [How Grafana Alloy Works: Demo (Video)](https://www.youtube.com/watch?v=NrnLyDXpfq0)\n- [Grafana Alloy on GitHub](https://github.com/grafana/alloy)"
    }
  ]
}
