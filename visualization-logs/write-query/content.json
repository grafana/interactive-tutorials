{
  "id": "visualization-logs-write-query",
  "title": "Write a LogQL query",
  "blocks": [
    {
      "type": "markdown",
      "content": "Now that you've added a panel, it's time to write the query. A query is an expression that specifies the dataset to be used in the visualization.\n\nA LogQL query consists of two main parts:\n- **Log stream selector**: Label matchers that narrow down the log streams\n- **Log pipeline**: A series of operations that filter, parse, and transform log lines"
    },
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "[data-testid=\"data-testid Select a data source\"]",
      "content": "Click the **Data source** drop-down to select your Loki data source.",
      "doIt": false,
      "requirements": ["exists-reftarget"]
    },
    {
      "type": "markdown",
      "content": "Select your Loki data source from the list (for example, `grafanacloud-*-logs`). The query builder will update to show LogQL-specific options."
    },
    {
      "type": "markdown",
      "content": "**Did you know?** For a Loki data source, the default visualization is a logs panel. You can select another type from the visualization list in the panel editor."
    },
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "[data-testid=\"data-testid Select label\"]",
      "content": "Click the **Select label** drop-down to choose a label filter.",
      "doIt": false,
      "requirements": ["exists-reftarget"]
    },
    {
      "type": "markdown",
      "content": "Select a label from the list, for example `job`. Then select a value like `grafana` to filter logs from that job."
    },
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "[data-testid=\"label-browser-button\"]",
      "content": "Click **Label browser** to explore available labels and values.",
      "doIt": false,
      "requirements": ["exists-reftarget"]
    },
    {
      "type": "markdown",
      "content": "You can also add line filters to search for specific text within log lines."
    },
    {
      "type": "interactive",
      "action": "button",
      "reftarget": "Operations",
      "content": "Click **Operations** to add a filter or parser to your query.",
      "doIt": false,
      "requirements": ["exists-reftarget"]
    },
    {
      "type": "markdown",
      "content": "Common operations include:\n- **Line contains**: Filter logs containing specific text\n- **Line filter**: Use regex patterns to match log lines\n- **JSON/Logfmt parser**: Extract fields from structured logs"
    },
    {
      "type": "interactive",
      "action": "button",
      "reftarget": "Run query",
      "content": "Click **Run query** to execute your LogQL query and see the results.",
      "doIt": false,
      "requirements": ["exists-reftarget"]
    },
    {
      "type": "markdown",
      "content": "The visualization updates to show your queried log data."
    }
  ]
}
