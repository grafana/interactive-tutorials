{
  "id": "visualization-metrics-write-query",
  "title": "Write a PromQL query",
  "blocks": [
    {
      "type": "markdown",
      "content": "Now that you have a panel configured, it's time to write the query. A query is an expression that specifies the dataset to be used in the visualization.\n\nA PromQL query consists of three basic elements:\n- **Metric**: The specific time series data you want to analyze\n- **Label filter**: Key-value pairs that narrow down the dataset\n- **Operation**: Functions that modify or process the data\n\nTo write a PromQL query using the Query Builder, complete the following steps:"
    },
    {
      "type": "section",
      "blocks": [
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "[data-testid=\"data-testid metric select\"]",
          "content": "Click the **Metric** drop-down list to select a metric.",
          "doIt": false,
          "requirements": ["exists-reftarget"]
        },
        {
          "type": "markdown",
          "content": "Select a metric from the list, for example `node_cpu_usage_seconds_total`."
        },
        {
          "type": "markdown",
          "content": "(Optional) In the **Label filters** fields, select a key-value pair and operator to filter your data. For example, select `node`, `=`, and your specific node ID."
        },
        {
          "type": "interactive",
          "action": "button",
          "reftarget": "Operations",
          "content": "Click **+ Operations** to add a function to your query.",
          "doIt": false,
          "requirements": ["exists-reftarget"]
        },
        {
          "type": "markdown",
          "content": "Select a function from the menu. For example, select **Range > Rate** and `$__rate_interval`."
        },
        {
          "type": "interactive",
          "action": "button",
          "reftarget": "Operations",
          "content": "Click **+ Operations** again to add another operation.",
          "doIt": false,
          "requirements": ["exists-reftarget"]
        },
        {
          "type": "markdown",
          "content": "Select another function. For example, select **Aggregations > Sum**."
        },
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "[data-testid=\"data-testid RefreshPicker run button\"]",
          "content": "Click **Refresh** in the toolbar to run the query and populate the visualization with data.",
          "doIt": false,
          "requirements": ["exists-reftarget"]
        }
      ]
    },
    {
      "type": "markdown",
      "content": "**Did you know?** If you're unsure of the metric name, click the **Metrics explorer** icon to search for metrics by name and type."
    },
    {
      "type": "markdown",
      "content": "Your visualization should now display data based on your query. In the next milestone, you'll configure the time range and refresh interval."
    },
    {
      "type": "markdown",
      "content": "**More to explore (optional)**\n\n- [Introduction to histograms and heatmaps](/docs/grafana-cloud/introduction/histograms/)\n- [Metrics explorer](/docs/grafana-cloud/connect-externally-hosted/data-sources/prometheus/query-editor/#metrics-explorer)\n- [Label filters](/docs/grafana-cloud/connect-externally-hosted/data-sources/prometheus/query-editor/#label-filters)\n- [Operations](/docs/grafana-cloud/connect-externally-hosted/data-sources/prometheus/query-editor/#operations)"
    }
  ]
}
