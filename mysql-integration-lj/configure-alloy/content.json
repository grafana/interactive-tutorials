{
  "id": "mysql-integration-configure-alloy",
  "title": "Configure Grafana Alloy for MySQL monitoring",
  "blocks": [
    {
      "type": "markdown",
      "content": "In this milestone, you configure Grafana Alloy using the configuration snippets provided by the MySQL integration. These snippets enable Grafana Alloy to collect MySQL metrics and logs and send them to your Grafana Cloud instance.\n\nThe configuration includes components for MySQL metrics collection using the Prometheus MySQL exporter component and log collection using Loki source file components.\n\nTo configure Grafana Alloy for MySQL monitoring, complete the following steps:"
    },
    {
      "type": "section",
      "blocks": [
        {
          "type": "markdown",
          "content": "On the MySQL integration page in Grafana Cloud, scroll to the **Set up Grafana Alloy to use the MySQL integration** section."
        },
        {
          "type": "markdown",
          "content": "At the bottom of the snippet, click **Copy to clipboard**."
        },
        {
          "type": "markdown",
          "content": "Open the Grafana Alloy configuration file on your system. For example, on a Linux machine, run:\n\n```\nsudo nano /etc/alloy/config.alloy\n```"
        },
        {
          "type": "markdown",
          "content": "Paste the integration snippet into the configuration file."
        },
        {
          "type": "markdown",
          "content": "Update the `data_source_name` parameter with your MySQL connection details. For example: `alloy_monitor:secure_password@(localhost:3306)/`"
        },
        {
          "type": "markdown",
          "content": "Review the log path in the logs configuration and update it if necessary:\n\n- For Linux systems, the default path is `/var/log/mysql/*.log`\n- For Windows systems, the default path is `C:\\ProgramData\\MySQL\\MySQL Server*\\Data\\*.log`"
        },
        {
          "type": "markdown",
          "content": "Save the configuration file and exit the editor."
        },
        {
          "type": "markdown",
          "content": "Restart the Grafana Alloy service to apply the configuration. On Linux, run:\n\n```\nsudo systemctl restart alloy\n```"
        },
        {
          "type": "markdown",
          "content": "Check the service status to ensure it started successfully. On Linux, run:\n\n```\nsudo systemctl status alloy\n```"
        }
      ]
    },
    {
      "type": "markdown",
      "content": "The Grafana Alloy service should restart successfully and begin collecting MySQL metrics and logs.\n\nIn the next milestone, you test the connection to verify that data is being collected and sent to Grafana Cloud."
    },
    {
      "type": "markdown",
      "content": "**Troubleshooting**\n\nExplore the following troubleshooting topics if you need help:\n\n- [The Alloy configuration file is empty](/docs/grafana-cloud/monitor-infrastructure/integrations/troubleshoot/install-troubleshoot-linux-alloy/#the-alloy-configuration-file-is-empty)\n- [Data appears in Grafana Cloud, but hostname is incorrect or it appears as \"localhost\"](/docs/grafana-cloud/monitor-infrastructure/integrations/troubleshoot/install-troubleshoot-linux-alloy/#data-appears-in-grafana-cloud-but-hostname-is-incorrect-or-it-appears-as-localhost)"
    },
    {
      "type": "markdown",
      "content": "**More to explore (optional)**\n\n- [Configure Grafana Alloy to collect all metrics and logs (advanced)](/docs/grafana-cloud/monitor-infrastructure/integrations/integration-reference/integration-linux-node#advanced-mode)\n- [Configure Grafana Alloy](/docs/alloy/latest/configure)\n- [Logs and relabeling basics in Grafana Alloy (tutorial)](/docs/alloy/latest/tutorials/logs-and-relabeling-basics)\n- [Grafana Alloy configuration reference](/docs/alloy/latest/reference/)"
    }
  ]
}
