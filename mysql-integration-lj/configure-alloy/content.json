{
  "id": "mysql-integration-configure-alloy",
  "title": "Configure Grafana Alloy for MySQL monitoring",
  "blocks": [
    {
      "type": "markdown",
      "content": "In this milestone, you configure Grafana Alloy using the configuration snippets provided by the MySQL integration. These snippets enable Grafana Alloy to collect MySQL metrics and logs."
    },
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "div[data-testid='alloy-simple-block']+button",
      "requirements": ["exists-reftarget"],
      "content": "In the **Set up Grafana Alloy to use the MySQL integration** section, click **Copy to clipboard**."
    },
    {
      "type": "markdown",
      "content": "Open the Grafana Alloy configuration file on your system. For example, on Linux:\n\n```\nsudo nano /etc/alloy/config.alloy\n```"
    },
    {
      "type": "markdown",
      "content": "Paste the integration snippet into the configuration file."
    },
    {
      "type": "markdown",
      "content": "Update the `data_source_name` parameter with your MySQL connection details:\n\n```\nalloy_monitor:secure_password@(localhost:3306)/\n```"
    },
    {
      "type": "markdown",
      "content": "Review the log path in the logs configuration and update it if necessary:\n\n- **Linux:** `/var/log/mysql/*.log`\n- **Windows:** `C:\\ProgramData\\MySQL\\MySQL Server*\\Data\\*.log`"
    },
    {
      "type": "markdown",
      "content": "Save the configuration file and exit the editor. Press `Ctrl+O` to write, then **Enter** to save, then `Ctrl+X` to exit."
    },
    {
      "type": "markdown",
      "content": "Restart the Grafana Alloy service:\n\n```\nsudo systemctl restart alloy\n```"
    },
    {
      "type": "markdown",
      "content": "Check the service status:\n\n```\nsudo systemctl status alloy\n```"
    }
  ]
}
