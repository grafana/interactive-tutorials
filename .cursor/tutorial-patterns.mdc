---
description: Guide structure patterns and archetypes for product tours, setup guides, feature deep-dives, and workflow guides.
---

# Interactive Guide Patterns for AI Generation

The term "guide" is preferred over "tutorial" throughout this documentation.

## Guide Structure Patterns

### Complete Guide Template
```json
{
  "id": "unique-guide-id",
  "title": "Guide Title",
  "blocks": [
    {
      "type": "markdown",
      "content": "Introduction explaining what user will learn.\n\n- Learning objective 1\n- Learning objective 2\n- Learning objective 3"
    },
    {
      "type": "section",
      "id": "section-1",
      "title": "Section 1 Title",
      "blocks": [
        // Section 1 steps
      ]
    },
    {
      "type": "section",
      "id": "section-2",
      "title": "Section 2 Title",
      "blocks": [
        // Section 2 steps
      ]
    },
    {
      "type": "markdown",
      "content": "You've completed this guide.\n\n- Achievement 1\n- Achievement 2\n- Achievement 3\n\n**Next:** Link to next guide or suggested actions"
    }
  ]
}
```

### Section Structure Pattern
```json
{
  "type": "section",
  "id": "section-id",
  "title": "Section Title",
  "requirements": ["section-requirements"],
  "objectives": ["section-objectives"],
  "tooltip": "section-description",
  "blocks": [
    {
      "type": "markdown",
      "content": "Section description and context"
    },
    {
      "type": "interactive",
      "action": "...",
      "content": "Step 1"
    }
  ]
}
```

## Common Guide Types

### 1. Product Tour / Onboarding
**Goal**: Familiarize users with Grafana interface
**Pattern**: Show-only highlights with rich comments
**Sections**: Navigation, Dashboard basics, Key features

```json
{
  "type": "section",
  "id": "grafana-tour",
  "title": "Grafana Tour",
  "blocks": [
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "a[data-testid='Nav menu item'][href='/']",
      "requirements": ["navmenu-open"],
      "doIt": false,
      "tooltip": "The Home page is your Grafana dashboard hub. It shows recent dashboards, starred favorites, and quick access to common tasks.",
      "content": "Start with the Home page"
    },
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "a[data-testid='Nav menu item'][href='/dashboards']",
      "doIt": false,
      "tooltip": "Dashboards are collections of panels displaying your data. Create time series, stats, tables and more to visualize your monitoring data.",
      "content": "Explore the Dashboards section"
    }
  ]
}
```

### 2. Setup/Configuration Guide
**Goal**: Configure a specific feature or integration
**Pattern**: Sections with verification and objectives
**Sections**: Prerequisites, Configuration, Testing, Usage

```json
{
  "id": "setup-guide",
  "title": "Setup Guide",
  "blocks": [
    {
      "type": "markdown",
      "content": "This guide walks you through configuring a Prometheus data source and creating your first monitoring dashboard."
    },
    {
      "type": "section",
      "id": "setup-datasource",
      "title": "Set Up Data Source",
      "requirements": ["is-admin"],
      "objectives": ["has-datasource:prometheus"],
      "blocks": [
        {
          "type": "markdown",
          "content": "Connect Grafana to your Prometheus server so you can query and visualize metrics."
        },
        {
          "type": "interactive",
          "action": "navigate",
          "reftarget": "/connections/datasources",
          "requirements": ["navmenu-open"],
          "verify": "on-page:/connections",
          "content": "Navigate to data sources."
        },
        {
          "type": "interactive",
          "action": "button",
          "reftarget": "Add new data source",
          "content": "Click **Add new data source**."
        },
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "a[href='/connections/datasources/prometheus']",
          "content": "Select **Prometheus** from the list."
        },
        {
          "type": "interactive",
          "action": "formfill",
          "reftarget": "input[id='basic-settings-name']",
          "targetvalue": "prometheus-datasource",
          "content": "Name the data source."
        },
        {
          "type": "interactive",
          "action": "formfill",
          "reftarget": "input[id='connection-url']",
          "targetvalue": "http://prometheus:9090",
          "content": "Set the server URL."
        },
        {
          "type": "interactive",
          "action": "button",
          "reftarget": "Save & test",
          "verify": "has-datasource:prometheus-datasource",
          "content": "Click **Save & test** to verify the connection."
        },
        {
          "type": "markdown",
          "content": "Your Prometheus data source is ready. Grafana can now query your metrics."
        }
      ]
    },
    {
      "type": "section",
      "id": "create-dashboard",
      "title": "Create Dashboard",
      "requirements": ["section-completed:setup-datasource"],
      "objectives": ["has-dashboard-named:Monitoring Dashboard"],
      "blocks": [
        // Dashboard creation steps
      ]
    }
  ]
}
```

### 3. Feature Deep-Dive Guide
**Goal**: Teach specific Grafana feature in depth
**Pattern**: Mix of education (show-only) and practice (regular actions)
**Sections**: Concept intro, Basic usage, Advanced features

```json
{
  "id": "feature-guide",
  "title": "Understanding Grafana Alerting",
  "blocks": [
    {
      "type": "markdown",
      "content": "Grafana Alerting monitors your metrics and notifies you when conditions are met. This guide shows you how alert rules work and walks you through creating one."
    },
    {
      "type": "section",
      "id": "learn-alerting",
      "title": "Learn Alerting",
      "blocks": [
        {
          "type": "interactive",
          "action": "highlight",
          "reftarget": "div[data-testid='alert-rules-list']",
          "requirements": ["on-page:/alerting"],
          "doIt": false,
          "tooltip": "Alert rules continuously monitor your metrics. When conditions like CPU > 80% are met, they trigger notifications to keep your team informed.",
          "content": "Explore the alert rules interface"
        }
      ]
    },
    {
      "type": "section",
      "id": "create-alert",
      "title": "Create Alert",
      "requirements": ["section-completed:learn-alerting", "has-datasource:prometheus"],
      "blocks": [
        // Actual alert creation steps
      ]
    }
  ]
}
```

### 4. Workflow Guide
**Goal**: Complete a real-world task end-to-end
**Pattern**: Sequential sections building toward final goal
**Sections**: Setup, Configuration, Implementation, Validation

```json
{
  "id": "workflow-guide",
  "title": "Complete Monitoring Setup",
  "blocks": [
    {
      "type": "markdown",
      "content": "Set up end-to-end monitoring: connect a data source, build a dashboard, and create alert rules."
    },
    {
      "type": "section",
      "id": "setup-monitoring-data",
      "title": "Setup Monitoring Data",
      "objectives": ["has-datasource:type:prometheus"],
      "blocks": [
        // Data source setup
      ]
    },
    {
      "type": "section",
      "id": "create-monitoring-dashboard",
      "title": "Create Monitoring Dashboard",
      "requirements": ["section-completed:setup-monitoring-data"],
      "objectives": ["has-dashboard-named:System Monitoring"],
      "blocks": [
        // Dashboard creation
      ]
    },
    {
      "type": "section",
      "id": "setup-monitoring-alerts",
      "title": "Setup Monitoring Alerts",
      "requirements": ["section-completed:create-monitoring-dashboard"],
      "objectives": ["on-page:/alerting/list"],
      "blocks": [
        // Alert setup
      ]
    }
  ]
}
```

## Content Writing Patterns

### Step Description Patterns
```json
// Action-focused descriptions
{
  "type": "interactive",
  "action": "button",
  "reftarget": "Save",
  "content": "Save your dashboard changes"
}

// Context-rich descriptions
{
  "type": "interactive",
  "action": "formfill",
  "reftarget": "input[id='url']",
  "targetvalue": "http://prometheus:9090",
  "content": "Set the Prometheus server URL to connect to your metrics"
}

// Educational descriptions
{
  "type": "interactive",
  "action": "highlight",
  "reftarget": "div[data-testid='panel']",
  "doIt": false,
  "tooltip": "This panel displays your metrics in real-time...",
  "content": "Examine how panels display your monitoring data"
}
```

### Section Introduction Patterns

Section intros are the first `markdown` block inside a `section`. They briefly explain what the user will do and why. Do not use markdown headings — the section's `title` property already provides the heading.

```json
// Goal-oriented (first block inside a section)
{
  "type": "markdown",
  "content": "Connect Grafana to your Prometheus server so you can query and visualize your metrics."
}

// Context-setting
{
  "type": "markdown",
  "content": "Now that your data source is configured, create a dashboard to display your Prometheus metrics."
}

// Problem-solving
{
  "type": "markdown",
  "content": "Dashboards show you what happened, but alerts tell you when something *is* happening. Create alert rules to monitor your system proactively."
}
```

## Advanced Patterns

### Conditional Workflows
```json
// Different paths based on user state
{
  "type": "section",
  "id": "admin-setup",
  "title": "Admin Setup",
  "requirements": ["is-admin"],
  "tooltip": "Admin-specific setup process",
  "blocks": [
    // Admin workflow
  ]
}

{
  "type": "section",
  "id": "user-setup",
  "title": "User Setup",
  "requirements": ["has-role:viewer"],
  "tooltip": "Non-admin workflow",
  "blocks": [
    // Limited user workflow
  ]
}
```

### Progressive Complexity
```json
// Basic level
{
  "type": "section",
  "id": "basic-query",
  "title": "Basic Query",
  "blocks": [
    {
      "type": "interactive",
      "action": "formfill",
      "reftarget": "textarea",
      "targetvalue": "up",
      "content": "Enter basic 'up' query"
    }
  ]
}

// Intermediate level
{
  "type": "section",
  "id": "intermediate-query",
  "title": "Intermediate Query",
  "requirements": ["section-completed:basic-query"],
  "blocks": [
    {
      "type": "interactive",
      "action": "formfill",
      "reftarget": "textarea",
      "targetvalue": "rate(http_requests_total[5m])",
      "content": "Enter rate calculation query"
    }
  ]
}

// Advanced level
{
  "type": "section",
  "id": "advanced-query",
  "title": "Advanced Query",
  "requirements": ["section-completed:intermediate-query", "has-feature:expressions"],
  "blocks": [
    {
      "type": "interactive",
      "action": "formfill",
      "reftarget": "textarea",
      "targetvalue": "sum(rate(http_requests_total[5m])) by (status)",
      "content": "Enter aggregated rate query"
    }
  ]
}
```

### Error Recovery Workflows
```json
// Primary workflow
{
  "type": "section",
  "id": "primary-setup",
  "title": "Primary Setup",
  "objectives": ["has-datasource:prometheus"],
  "blocks": [
    // Normal setup steps
  ]
}

// Alternative workflow
{
  "type": "section",
  "id": "alternative-setup",
  "title": "Alternative Setup",
  "requirements": ["section-completed:primary-setup"],
  "skippable": true,
  "blocks": [
    // Alternative if primary fails
  ]
}
```

## AI Generation Decision Trees

### Choose Action Type
```
User request analysis:
  "Click [button_text]" → button action
  "Click [element_description]" → highlight action  
  "Enter [value]" → formfill action
  "Go to [page]" → navigate action
  "Do [multiple things]" → sequence (as section) or multistep
  "Show [element]" → highlight with doIt: false
```

### Choose Requirements
```
Action context analysis:
  exists-reftarget is auto-applied — never add it manually
  Navigation menu → add "navmenu-open"
  Specific page → add "on-page:/path"
  Admin feature → add "is-admin"
  Data source needed → add "has-datasource:type"
  Plugin needed → add "has-plugin:id"
  Previous section → add "section-completed:id"
```

### Choose Structure
```
Content complexity analysis:
  Single action → individual step
  Related actions → multistep
  Multiple checkpoints → section
  Educational content → show-only with comments
  Complex workflow → section with mixed step types
```

## Common Guide Scenarios

### Scenario: "Show me how to create a dashboard"
```json
{
  "type": "section",
  "id": "create-dashboard-guide",
  "title": "Create Your First Dashboard",
  "requirements": ["has-datasources"],
  "objectives": ["has-dashboard-named:My First Dashboard"],
  "blocks": [
    {
      "type": "interactive",
      "action": "navigate",
      "reftarget": "/dashboard/new",
      "requirements": ["navmenu-open"],
      "verify": "on-page:/dashboard/new",
      "content": "Navigate to create new dashboard"
    },
    {
      "type": "interactive",
      "action": "button",
      "reftarget": "Add visualization",
      "content": "Add your first visualization."
    },
    {
      "type": "interactive",
      "action": "button",
      "reftarget": "prometheus-datasource",
      "requirements": ["has-datasource:prometheus"],
      "content": "Select your data source"
    },
    {
      "type": "interactive",
      "action": "formfill",
      "reftarget": "textarea[data-testid='query-editor']",
      "targetvalue": "up",
      "content": "Enter a basic query."
    },
    {
      "type": "interactive",
      "action": "formfill",
      "reftarget": "input[data-testid='Panel editor option pane field input Title']",
      "targetvalue": "System Status",
      "content": "Set the panel title."
    },
    {
      "type": "interactive",
      "action": "button",
      "reftarget": "Save dashboard",
      "verify": "has-dashboard-named:My First Dashboard",
      "content": "Save the dashboard"
    }
  ]
}
```

### Scenario: "Set up Prometheus monitoring"
```json
{
  "id": "prometheus-setup",
  "title": "Prometheus + Grafana Setup",
  "blocks": [
    {
      "type": "markdown",
      "content": "Set up Prometheus as a data source, build a monitoring dashboard, and configure alerts."
    },
    {
      "type": "section",
      "id": "setup-prometheus-datasource",
      "title": "Configure Prometheus Data Source",
      "requirements": ["is-admin"],
      "objectives": ["has-datasource:type:prometheus"],
      "blocks": [
        // Data source setup steps
      ]
    },
    {
      "type": "section",
      "id": "create-prometheus-dashboard",
      "title": "Create Prometheus Dashboard",
      "requirements": ["section-completed:setup-prometheus-datasource"],
      "blocks": [
        // Dashboard creation steps
      ]
    },
    {
      "type": "section",
      "id": "setup-prometheus-alerts",
      "title": "Configure Prometheus Alerts",
      "requirements": ["section-completed:create-prometheus-dashboard"],
      "blocks": [
        // Alert setup steps
      ]
    }
  ]
}
```

### Scenario: "Explain this interface element"
```json
{
  "type": "interactive",
  "action": "highlight",
  "reftarget": "div[data-testid='query-editor-container']",
  "requirements": ["on-page:/explore"],
  "doIt": false,
  "tooltip": "The query editor is where you write queries in your data source's native language. For Prometheus, use PromQL. For Loki, use LogQL. The editor provides syntax highlighting and auto-completion to help you write effective queries.",
  "content": "Learn about the query editor interface"
}
```

## Interactive Comment Guidelines

### Content Structure Template
```json
{
  "tooltip": "The UI_ELEMENT_NAME purpose/function explanation. Context about why it's important. Use it for technical_features to user_benefit_or_outcome."
}
```

### Applied Examples

#### Feature Explanation
```json
{
  "tooltip": "The visualization picker lets you choose how to display your data. Different chart types tell different stories about your metrics. Choose time series for trends, stat panels for current values, and tables for detailed breakdowns."
}
```

#### Process Guidance
```json
{
  "tooltip": "Save & test validates your data source configuration and saves it. A green success message confirms everything works correctly, while red error messages help you troubleshoot connection issues."
}
```

#### Context Building
```json
{
  "tooltip": "This metrics panel shows your application's performance in real-time. The time series chart reveals trends and patterns, helping you identify performance bottlenecks and capacity planning needs."
}
```

## Error Handling Patterns

### Graceful Degradation
```json
// Primary action with fallback
{
  "type": "interactive",
  "action": "button",
  "reftarget": "Quick setup",
  "requirements": ["has-plugin:setup-wizard"],
  "skippable": true,
  "tooltip": "Uses setup wizard if available, can skip if not installed",
  "content": "Use quick setup wizard (skip if not available)"
}

// Manual fallback
{
  "type": "interactive",
  "action": "navigate",
  "reftarget": "/connections/datasources/new",
  "requirements": ["is-admin"],
  "content": "Or set up data source manually"
}
```

### Permission-Aware Guides
```json
// Admin path
{
  "type": "section",
  "id": "admin-plugin-setup",
  "title": "Install Plugin (Admin)",
  "requirements": ["is-admin"],
  "blocks": [
    // Admin-specific steps
  ]
}

// Non-admin alternative
{
  "type": "section",
  "id": "user-plugin-info",
  "title": "Request Plugin Installation",
  "requirements": ["has-role:viewer"],
  "blocks": [
    {
      "type": "interactive",
      "action": "highlight",
      "reftarget": "div[data-testid='plugin-catalog']",
      "doIt": false,
      "tooltip": "You can browse available plugins here, but installation requires admin privileges. Contact your Grafana administrator to request plugin installations.",
      "content": "Browse available plugins (view-only)"
    }
  ]
}
```

## Quality Guidelines for AI

### Content Quality Checklist
- [ ] Guide has clear learning objectives
- [ ] Steps progress logically toward goal
- [ ] Requirements are appropriate for each action
- [ ] Error cases are handled gracefully
- [ ] Interactive comments add educational value
- [ ] Section structure supports resumable progress

### Technical Quality Checklist
- [ ] `exists-reftarget` is NOT manually added (it's auto-applied)
- [ ] Navigation interactions include `navmenu-open`
- [ ] Page-specific actions include `on-page:/path`
- [ ] State-changing actions include `verify`
- [ ] Admin actions include appropriate permission requirements
- [ ] Sections have unique, stable IDs

### User Experience Checklist
- [ ] Steps can be completed by intended user audience
- [ ] Error messages are helpful and actionable
- [ ] Guide works across different Grafana setups
- [ ] Progress can be resumed after interruption
- [ ] Alternative paths provided for different user states

## Maintenance Patterns

### Version Compatibility
```json
// Version-specific features
{
  "type": "interactive",
  "action": "button",
  "reftarget": "New scene",
  "requirements": ["min-version:9.0.0"],
  "skippable": true,
  "tooltip": "Scenes feature requires Grafana 9.0+",
  "content": "Use new scenes feature (skip if older version)"
}

// Fallback for older versions
{
  "type": "interactive",
  "action": "button",
  "reftarget": "Create dashboard",
  "content": "Create dashboard using standard interface."
}
```

### Environment Adaptation
```json
// Cloud-specific
{
  "type": "interactive",
  "action": "navigate",
  "reftarget": "/a/cloud-setup",
  "requirements": ["in-environment:cloud"],
  "skippable": true,
  "content": "Access cloud-specific setup"
}

// On-premise alternative
{
  "type": "interactive",
  "action": "navigate",
  "reftarget": "/admin/settings",
  "requirements": ["is-admin", "in-environment:production"],
  "content": "Configure on-premise settings"
}
```
