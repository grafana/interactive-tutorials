---
alwaysApply: true
---
# Complex Selectors and Hover Reference

> **Full documentation**: See [docs/selectors-and-testids.md](../docs/selectors-and-testids.md)

## Advanced Pseudo-Selectors

### `:nth-match(n)` - Find nth element globally

Unlike `:nth-child()` which looks within parent, `:nth-match()` finds the nth matching element in the entire document.

```json
{
  "reftarget": "div[data-testid='uplot-main-div']:nth-match(3)"
}
```

### `:contains('text')` - Find by text content

```json
{
  "reftarget": "div:contains('checkoutservice')"
}
```

### `:has(selector)` - Find parent containing child

```json
{
  "reftarget": "div[data-cy='service-card']:has(p:contains('auth'))"
}
```

### Combined selectors

```json
{
  "reftarget": "div[data-cy='item']:has(h3:contains('Service')) button[data-action='configure']"
}
```

## Hover-Dependent UI Patterns

### Multistep (Automated)

```json
{
  "type": "multistep",
  "content": "Hover and click the action button",
  "steps": [
    {
      "action": "hover",
      "reftarget": "div[data-cy='wb-list-item']:has(p:contains('checkoutservice'))"
    },
    {
      "action": "button",
      "reftarget": "Dashboard"
    }
  ]
}
```

### Guided (User Performs)

```json
{
  "type": "guided",
  "content": "Manually hover to reveal buttons",
  "stepTimeout": 30000,
  "steps": [
    {
      "action": "hover",
      "reftarget": "tr[data-row-id='user-123']",
      "tooltip": "Hover over the row"
    },
    {
      "action": "button",
      "reftarget": "Edit",
      "tooltip": "Click the Edit button"
    }
  ]
}
```

## When to Use Guided vs Multistep

| Scenario                          | Use           |
|-----------------------------------|---------------|
| CSS `:hover` must trigger         | `guided`      |
| User should learn by doing        | `guided`      |
| Automation is reliable            | `multistep`   |
| Speed is important                | `multistep`   |
